{"mappings":"AAiEA,MAAMA,EAAO,CACXC,KAAMC,SAASC,cAAc,mBAC7BC,KAAMF,SAASC,cAAc,eAC7BE,YAAaH,SAASC,cAAc,mBAEhCF,KAAEK,EAAIF,KAAEG,EAAIF,YAAEG,GAAgBR,EAE9BS,EAAc,IA3DpB,MACEC,GAAY,yCACZC,GAAW,8CAEXC,GACAC,GACAC,GAEAC,GAAgB,IAAIC,gBAAgB,CAClCC,SAAU,GACVC,UAAWC,MAAKR,EAChBS,MAAO,QACPC,YAAa,aAGfC,cACEH,MAAKP,EAAQ,EACbO,MAAKN,EAAe,GACpBM,MAAKL,EAAa,I,CAGpBS,YACE,OAAOC,MACL,GAAGL,MAAKT,KAAaS,MAAKJ,UAAsBI,MAAKP,WACnDO,MAAKN,KAEPY,MAAKC,GAAKA,EAAEC,Q,CAKZf,WACF,OAAOO,MAAKP,C,CAGVA,SAAKgB,GACPT,MAAKP,EAAQgB,C,CAEXd,gBACF,OAAOK,MAAKL,C,CAEVA,cAAUe,GACZV,MAAKL,EAAae,C,CAEhBhB,gBAAYiB,GACdX,MAAKN,EAAeiB,C,CAElBjB,kBACF,OAAOM,MAAKN,C,GA+ChB,SAASkB,EAAmBC,GAC1B,OAAOA,EACJC,KACC,EAACC,KAAEA,EAAIC,gBAAEA,KAAsB,+CACnBD,EAAKE,eAAeD,qCAGjCE,KAAK,G,CAGV/B,EAAKgC,iBAAiB,UA5CtB,SAAsBC,GACpBA,EAAEC,iBAEF,MAAMC,EAAQF,EAAEG,OAAOC,SAASF,MAAMG,MAAMC,OAEvCJ,IAELlC,EAAKuC,UAAY,GACjBrC,EAAYG,KAAO,EACnBH,EAAYI,YAAc4B,EAE1BhC,EAAYc,YAAYE,MAAKsB,IACR,IAAfA,EAAKC,QAETvC,EAAYK,UAAYiC,EAAKE,YAE7B1C,EAAK2C,mBAAmB,YAAanB,EAAmBgB,EAAKI,UAEzD1C,EAAYG,OAASmC,EAAKE,aAC5BzC,EAAY4C,UAAUC,OAAO,aAAY,I,IA0B/C7C,EAAY8B,iBAAiB,SAtB7B,WACE7B,EAAYG,MAAQ,EAEpBH,EAAYc,YAAYE,MAAKsB,IACvBtC,EAAYG,OAASH,EAAYK,WACnCN,EAAY4C,UAAUE,IAAI,aAE5B/C,EAAK2C,mBAAmB,YAAanB,EAAmBgB,EAAKI,SAAS,G","sources":["src/js/gallery.js"],"sourcesContent":["/*  У цій задачі потрібно написати скрипт, який дозволить шукати фотографії за запитом, використовуючи API Unsplash. Вам необхідно зробити запит на сервер API Unsplash зі словом, введеним користувачем у вікно пошуку. Результати повинні виводитися в галереї зображень. Використовуй класовий підхід для створення запитів.\nВикористовуй html з файлу infinite_scroll.html.\n\nКоли користувач вводить запит для пошуку та натискає кнопку пошуку, скрипт робить запит до API Unsplash та отримує список зображень. Якщо з користувач нічого не ввів і намагається зробити запит виводь Notify.warning(\"Enter some data!\")\n\nКожне зображення повинно бути виведене в HTML розмітці як окремий елемент списку зображень.\n\nКоли користувач натискає кнопку \"load more\", скрипт повинен зробити запит на сервер API Unsplash для наступної сторінки результатів пошуку та додати нові зображення до списку.\n\nЯкщо запит не повертає результатів, скрипт повинен вивести повідомлення про те, що не знайдено жодного зображення: Notify.warning(\"Sorry no images were found\");\n\nКоли були завантажені всі сторінки результатів пошуку, кнопка \"load more\" повинна бути прихована (додати клас Єis-hidden\") і показати поп ап Notify.warning(\"The end!\");\n */\nclass UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n\n  #page;\n  #searchQuery;\n  #totalPage;\n\n  #searchParams = new URLSearchParams({\n    per_page: 30,\n    client_id: this.#API_KEY,\n    color: 'black',\n    orientation: 'portrait',\n  });\n\n  constructor() {\n    this.#page = 1;\n    this.#searchQuery = '';\n    this.#totalPage = null;\n  }\n\n  getImages() {\n    return fetch(\n      `${this.#BASE_URL}?${this.#searchParams}&page=${this.#page}&query=${\n        this.#searchQuery\n      }`\n    ).then(r => r.json());\n  }\n\n  //   updadePage() {}\n\n  get page() {\n    return this.#page;\n  }\n\n  set page(newPage) {\n    this.#page = newPage;\n  }\n  get totalPage() {\n    return this.#totalPage;\n  }\n  set totalPage(newtotalPage) {\n    this.#totalPage = newtotalPage;\n  }\n  set searchQuery(newQuery) {\n    this.#searchQuery = newQuery;\n  }\n  get searchQuery() {\n    return this.#searchQuery;\n  }\n}\n\nconst refs = {\n  form: document.querySelector('.js-search-form'),\n  list: document.querySelector('.js-gallery'),\n  loadMoreBtn: document.querySelector('.js-load-more'),\n};\nconst { form, list, loadMoreBtn } = refs;\n\nconst unsplashApi = new UnsplashAPI();\n\nfunction handleSubmit(e) {\n  e.preventDefault();\n\n  const query = e.target.elements.query.value.trim();\n\n  if (!query) return;\n\n  list.innerHTML = '';\n  unsplashApi.page = 1;\n  unsplashApi.searchQuery = query;\n\n  unsplashApi.getImages().then(data => {\n    if (data.total === 0) return;\n\n    unsplashApi.totalPage = data.total_pages;\n\n    list.insertAdjacentHTML('beforeend', createGalleryCards(data.results));\n\n    if (unsplashApi.page !== data.total_pages)\n      loadMoreBtn.classList.remove('is-hidden');\n  });\n}\n\nfunction handleClickLoadMore() {\n  unsplashApi.page += 1;\n\n  unsplashApi.getImages().then(data => {\n    if (unsplashApi.page === unsplashApi.totalPage) {\n      loadMoreBtn.classList.add('is-hidden');\n    }\n    list.insertAdjacentHTML('beforeend', createGalleryCards(data.results));\n  });\n}\n\nfunction createGalleryCards(images) {\n  return images\n    .map(\n      ({ urls, alt_description }) => `<li class=\"gallery__item\">\n      <img src=\"${urls.small}\" alt=\"${alt_description}\" class=\"gallery-img\">\n  </li>`\n    )\n    .join('');\n}\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', handleClickLoadMore);\n"],"names":["$7c59f4ec4043ce00$var$refs","form","document","querySelector","list","loadMoreBtn","$7c59f4ec4043ce00$var$form","$7c59f4ec4043ce00$var$list","$7c59f4ec4043ce00$var$loadMoreBtn","$7c59f4ec4043ce00$var$unsplashApi","BASE_URL","API_KEY","page","searchQuery","totalPage","searchParams","URLSearchParams","per_page","client_id","this","color","orientation","constructor","getImages","fetch","then","r","json","newPage","newtotalPage","newQuery","$7c59f4ec4043ce00$var$createGalleryCards","images","map","urls","alt_description","small","join","addEventListener","e","preventDefault","query","target","elements","value","trim","innerHTML","data","total","total_pages","insertAdjacentHTML","results","classList","remove","add"],"version":3,"file":"gallery.26d5ff63.js.map"}