{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_class_extract_field_descriptor.js","node_modules/@swc/helpers/lib/_class_apply_descriptor_get.js","node_modules/@swc/helpers/lib/_check_private_redeclaration.js","node_modules/@swc/helpers/lib/_class_apply_descriptor_set.js","src/js/infinite-scroll.js","node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_class_private_field_get.js","node_modules/@swc/helpers/lib/_class_private_field_init.js","node_modules/@swc/helpers/lib/_class_private_field_set.js","node_modules/@swc/helpers/lib/_create_class.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classExtractFieldDescriptor;\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n    }\n    return privateMap.get(receiver);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classApplyDescriptorGet;\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n    if (descriptor.get) {\n        return descriptor.get.call(receiver);\n    }\n    return descriptor.value;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _checkPrivateRedeclaration;\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n    if (privateCollection.has(obj)) {\n        throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classApplyDescriptorSet;\nfunction _classApplyDescriptorSet(receiver, descriptor, value) {\n    if (descriptor.set) {\n        descriptor.set.call(receiver, value);\n    } else {\n        if (!descriptor.writable) {\n            // This should only throw in strict mode, but class bodies are\n            // always strict and private fields can only be used inside\n            // class bodies.\n            throw new TypeError(\"attempted to set read only private field\");\n        }\n        descriptor.value = value;\n    }\n}\n","class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n\n  #page;\n  #searchQuery;\n\n  #searchParams = new URLSearchParams({\n    per_page: 30,\n    client_id: this.#API_KEY,\n    color: 'black',\n    orientation: 'portrait',\n  });\n\n  constructor() {\n    this.#page = 1;\n    this.#searchQuery = '';\n  }\n\n  async getImages() {\n    const response = await fetch(\n      `${this.#BASE_URL}?query=${this.#searchQuery}&page=${this.#page}&${\n        this.#searchParams\n      }`\n    );\n\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n\n    const data = await response.json();\n    return data;\n  }\n\n  get page() {\n    return this.#page;\n  }\n\n  set page(newPage) {\n    this.#page = newPage;\n  }\n\n  set searchQuery(newQuery) {\n    this.#searchQuery = newQuery;\n  }\n\n  get searchQuery() {\n    return this.#searchQuery;\n  }\n}\n\nconst refs = {\n  form: document.querySelector('.js-search-form'),\n  list: document.querySelector('.js-gallery'),\n  loadMoreBlock: document.querySelector('.more'),\n};\n\nconst { form, list, loadMoreBlock } = refs;\n\nconst unsplashApi = new UnsplashAPI();\n\nlet observer = new IntersectionObserver(callback);\n\nfunction callback(entries, observer) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      loadMoreItems();\n    }\n  });\n}\n\nlet totalPages = 0;\n\nfunction createGalleryCards(images) {\n  return images\n    .map(\n      ({ urls, alt_description }) => `<li class=\"gallery__item\">\n        <img src=\"${urls.small}\" alt=\"${alt_description}\" class=\"gallery-img\">\n    </li>`\n    )\n    .join('');\n}\n\nasync function loadMoreItems() {\n  const response = await unsplashApi.getImages();\n\n  if (!response.results.length) {\n    loadMoreBlock.classList.remove('is-visible');\n    return;\n  }\n\n  totalPages = response.total_pages;\n\n  const markup = createGalleryCards(response.results);\n  list.insertAdjacentHTML('beforeend', markup);\n\n  unsplashApi.page += 1;\n\n  if (unsplashApi.page > totalPages) {\n    loadMoreBlock.classList.remove('is-visible');\n    observer.unobserve(loadMoreBlock);\n    return;\n  }\n}\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n  const query = e.currentTarget.elements.query.value.trim();\n\n  if (!query) return;\n\n  unsplashApi.searchQuery = query;\n  unsplashApi.page = 1;\n  list.innerHTML = '';\n\n  loadMoreBlock.classList.add('is-visible');\n  observer.observe(loadMoreBlock);\n}\n\nform.addEventListener('submit', handleSubmit);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldGet;\nvar _classExtractFieldDescriptor = _interopRequireDefault(require(\"./_class_extract_field_descriptor\"));\nvar _classApplyDescriptorGet = _interopRequireDefault(require(\"./_class_apply_descriptor_get\"));\nfunction _classPrivateFieldGet(receiver, privateMap) {\n    var descriptor = (0, _classExtractFieldDescriptor).default(receiver, privateMap, \"get\");\n    return (0, _classApplyDescriptorGet).default(receiver, descriptor);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateFieldInit(obj, privateMap, value) {\n    (0, _checkPrivateRedeclaration).default(obj, privateMap);\n    privateMap.set(obj, value);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldSet;\nvar _classExtractFieldDescriptor = _interopRequireDefault(require(\"./_class_extract_field_descriptor\"));\nvar _classApplyDescriptorSet = _interopRequireDefault(require(\"./_class_apply_descriptor_set\"));\nfunction _classPrivateFieldSet(receiver, privateMap, value) {\n    var descriptor = (0, _classExtractFieldDescriptor).default(receiver, privateMap, \"set\");\n    (0, _classApplyDescriptorSet).default(receiver, descriptor, value);\n    return value;\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n"],"names":["Object","defineProperty","module","exports","value","default","receiver","privateMap","action","has","TypeError","get","descriptor","call","obj","privateCollection","set","writable","$bpxeT","parcelRequire","$665014edacbfe17b$exports","instance","Constructor","$37616d1d2d9e1de3$exports","$37616d1d2d9e1de3$var$_classExtractFieldDescriptor","$37616d1d2d9e1de3$var$_classApplyDescriptorGet","$37616d1d2d9e1de3$var$_interopRequireDefault","__esModule","$665bb80dc57e205a$exports","$665bb80dc57e205a$var$_checkPrivateRedeclaration","$a11a0d8e92c06afc$exports","$a11a0d8e92c06afc$var$_classExtractFieldDescriptor","$a11a0d8e92c06afc$var$_classApplyDescriptorSet","$a11a0d8e92c06afc$var$_interopRequireDefault","$74e7f8130373505f$var$_defineProperties","target","props","i","length","enumerable","configurable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","$93b54f497d416715$var$_BASE_URL","WeakMap","$93b54f497d416715$var$_API_KEY","$93b54f497d416715$var$_page","$93b54f497d416715$var$_searchQuery","$93b54f497d416715$var$_searchParams","$93b54f497d416715$var$UnsplashAPI","UnsplashAPI","$parcel$interopDefault","this","URLSearchParams","per_page","client_id","color","orientation","$2TvXO","mark","_callee","response","data","fetch","concat","_this","_ctx","sent","ok","Error","statusText","json","newPage","newQuery","$93b54f497d416715$var$refs","form","document","querySelector","list","loadMoreBlock","$93b54f497d416715$var$form","$93b54f497d416715$var$list","$93b54f497d416715$var$loadMoreBlock","$93b54f497d416715$var$unsplashApi","$93b54f497d416715$var$observer","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","$93b54f497d416715$var$_loadMoreItems","apply","arguments","$93b54f497d416715$var$loadMoreItems","$93b54f497d416715$var$totalPages","$93b54f497d416715$var$createGalleryCards","images","map","param","urls","alt_description","small","join","markup","getImages","results","classList","remove","total_pages","insertAdjacentHTML","page","unobserve","$93b54f497d416715$var$_handleSubmit","e","query","preventDefault","currentTarget","elements","trim","searchQuery","innerHTML","add","observe","addEventListener"],"version":3,"file":"infinite_scroll.bb62cd04.js.map"}